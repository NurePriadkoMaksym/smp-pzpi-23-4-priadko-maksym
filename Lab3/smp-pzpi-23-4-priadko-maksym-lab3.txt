Харківський національний університет радіоелектроніки
Факультет комп’ютерних наук

Кафедра програмної інженерії





ЗВІТ
з лабораторної роботи №3
з дисципліни «Скриптові мови програмування»


Виконав 								Перевірив
ст. гр. ПЗПІ-23-4							ст. викладач катедри ПІ
Прядко Максим							Сокорчук Ігор Петрович	
	









Харків 2025
1 ІСТОРІЯ ЗМІН
№ДатаВерсіяОпис змін104.06.20251.0Створено розділи «Завдання», «Хід роботи» та «Висновки»
2 ЗАВДАННЯ
Результатом лабораторної роботи має бути робочий сайт з інтернет-магазином. Він має складатися з таких розділів:
1. Сторінка товарів.
2. Сторінка «Кошик».
Кожна сторінка має складатися з таких частин:
1. «Шапка» сторінки,
2. Тіло сторінки.
3. «Підвал» або Footer сторінки.
На сторінці товарів необхідно відобразити список доступних для покупки
найменувань з можливістю вибрати кількість одиниць товарів і кнопкою
«купити».
Під час натискання на кнопку «купити», має відправлятися запит
(відправка форми, методом POST) на сервер, де дані зберігаються в сесію.
На сторінці «Кошик» необхідно відобразити список обраних користувачем
товарів (які були збережені у сесію).
Якщо ви ще не обрали жодного товару, то має бути відображений напис
«Перейти до покупок» (посилання).




3 ХІД РОБОТИ
Створюємо файл context.php,  у якому ми створююємо функцію підключення бази даних.
1. <?php
2. function getDbConnection(): PDO {
3. $db = new PDO('sqlite:' . __DIR__ . '/phpstore.db');
4. $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
5. return $db;
6. }
7. ?>
Далі створимо файл session.php,  у якому будуть розміщені два масиви $products та $cart, масив з продуктами заповнюємо за допомогою SQL запиту.
 
1. <?php
2. session_start();
3. require_once 'context.php';
4. $pdo = getDbConnection();
5. $products = [];
6. $stmt = $pdo->query("SELECT id, name, price FROM products");
7. while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
8. $products[$row['id']] = ['name' => $row['name'], 'price' => $row['price']];
9. }
10. $cart = $_SESSION['cart'] ?? [];
11. ?>
Далі реалізуємо екран з кошиком. У ньому реалізуємо функції прибирання об’єкту з кошику, підтвердження покупки, та повного очищення кошику. Фото для пустого та наповненого кошику можна побачити у рисунках 3 і 4 у ДОДАТОК Б.
1. function displayItems($items) {
2. echo "№  НАЗВА                   ЦІНА\n";
3. foreach ($items as $key => $val) {
4. printf("%-2d %-24s %5d\n", $key, $val["title"], $val["cost"]);
5. }
6. echo "   ------------------------------\n";
7. echo "0  ПОВЕРНЕННЯ ДО МЕНЮ\n";
8. echo "Оберіть товар: ";
9. }

Також зробимо сторінку з продуктами, реалізуємо додавання до кошику, і також додамо обмеження можна було додати лише 100 одиниць одного продукту
1. <?php
2. include 'session.php';

3. if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['add_to_cart'])) {
4. foreach ($_POST['qty'] as $id => $qty) {
5. $qty = (int)$qty;
6. if (isset($products[$id]) && $qty > 0) {
7. $currentQty = $cart[$id] ?? 0;
8. $newQty = $currentQty + $qty;
9. if ($newQty > 100) {
10. $cart[$id] = 100;
11. } else {
12. $cart[$id] = $newQty;
13. }
14. }
15. }

16. $_SESSION['cart'] = $cart;

17. header("Location: cart.php");
18. exit;
19. }
20. ?>



4 ВИСНОВКИ
У цій роботі я поглибив свої знання мови PHP, розробив веб-сторінку для обирання товарів у магазині, отримання суми цих товарів та їх придбання.



ДОДАТОК А
Посилання на відео-звіт: https://youtu.be/R15JuNTNy6A
Хронологічний опис відеозапису: 
00:00 — Вітання
00:28 — Показ бази даних SQLite
00:58 — Код. Підключення бази даних
02:12 — Код. Оголошення масиву з продуктами та наповнення масиву даними з бази даних
03:04 — Код. Кошик та взаємодії з ним
05:32 — Код. Інші елементи сайту
06:05 — Код. Додавання продуктів до кошика та обмеження їх кількості
07:39 — Перевірка роботи програми



